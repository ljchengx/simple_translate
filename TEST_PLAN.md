# Simple Translate 测试计划

## 测试环境
- 操作系统：Windows
- 测试日期：2026-01-18
- 应用版本：0.1.0

---

## 1. 单实例限制测试

### 测试步骤
1. 启动应用程序（第一个实例）
2. 检查系统托盘是否显示应用图标
3. 再次启动应用程序（尝试启动第二个实例）
4. 观察是否只有一个实例在运行

### 预期结果
- ✅ 只有一个应用实例在运行
- ✅ 系统托盘只显示一个图标
- ✅ 第二个实例启动被阻止

### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 2. 系统托盘测试

### 测试步骤
1. 启动应用程序
2. 检查系统托盘是否显示应用图标
3. 右键点击托盘图标
4. 检查菜单是否显示"设置"和"退出程序"选项
5. 点击"设置"，检查设置窗口是否打开
6. 点击"退出程序"，检查应用是否退出

### 预期结果
- ✅ 系统托盘显示一个应用图标（不是两个）
- ✅ 右键菜单显示"设置"和"退出程序"
- ✅ 点击"设置"打开设置窗口
- ✅ 点击"退出程序"应用正常退出

### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 3. 首次启动测试

### 测试步骤
1. 删除设置文件：`C:\Users\<username>\AppData\Roaming\com.es.simple-translate\settings.json`
2. 启动应用程序
3. 观察是否自动打开设置窗口

### 预期结果
- ✅ 首次启动时自动打开设置窗口
- ✅ 提示用户配置 API Key

### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 4. 设置页面测试

### 4.1 API Key 配置测试

#### 测试步骤
1. 打开设置窗口
2. 输入空的 API Key，点击"保存更改"
3. 观察是否显示错误提示（toast）
4. 输入无效的 API Key，点击"保存更改"
5. 观察是否显示验证失败提示
6. 输入有效的 API Key，点击"保存更改"
7. 观察是否显示保存成功提示

#### 预期结果
- ✅ 空 API Key 显示错误提示："API Key 不能为空"
- ✅ 无效 API Key 显示验证失败提示
- ✅ 有效 API Key 显示保存成功提示
- ✅ 所有提示以 toast 形式显示在右上角

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 4.2 语言方向配置测试

#### 测试步骤
1. 打开设置窗口
2. 选择源语言（如 EN）
3. 选择目标语言（如 ZH）
4. 点击"保存更改"
5. 重启应用，检查设置是否保持

#### 预期结果
- ✅ 语言选择正常工作
- ✅ 设置保存成功
- ✅ 重启后设置保持

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 4.3 自动关闭时间配置测试

#### 测试步骤
1. 打开设置窗口
2. 选择不同的自动关闭时间（1秒、1.5秒、2秒、3秒）
3. 点击"保存更改"
4. 触发翻译，观察窗口是否按照设置的时间自动关闭

#### 预期结果
- ✅ 自动关闭时间选择正常工作
- ✅ 设置保存成功
- ✅ 翻译窗口按照设置的时间自动关闭

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 4.4 自定义快捷键测试

#### 测试步骤
1. 打开设置窗口
2. 点击"全局快捷键"输入框
3. 观察输入框是否显示蓝色边框（录制状态）
4. 按下快捷键组合（如 Ctrl+Shift+T）
5. 观察输入框是否显示新的快捷键
6. 点击"保存更改"
7. 观察是否显示快捷键验证和保存成功提示
8. 使用新的快捷键触发翻译，检查是否工作
9. 点击"重置"按钮，检查是否恢复默认值（Ctrl+Q）

#### 预期结果
- ✅ 点击输入框显示蓝色边框和提示文字
- ✅ 按下快捷键组合后自动识别并显示
- ✅ 保存时验证快捷键是否可用
- ✅ 新快捷键立即生效（无需重启）
- ✅ 重置按钮恢复默认值
- ✅ 重启后快捷键设置保持

#### 测试用例
- [ ] Ctrl+Q（默认）
- [ ] Ctrl+Shift+T
- [ ] Alt+F1
- [ ] Ctrl+Alt+Q
- [ ] 尝试已被占用的快捷键（应显示错误）

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 5. 翻译功能测试

### 5.1 基本翻译测试

#### 测试步骤
1. 在任意应用中选中一段英文文本
2. 按下快捷键（默认 Ctrl+Q）
3. 观察翻译窗口是否在鼠标附近显示
4. 检查翻译结果是否正确
5. 鼠标移入窗口，检查自动关闭定时器是否取消
6. 鼠标移出窗口，检查窗口是否按照设置的时间自动关闭

#### 预期结果
- ✅ 翻译窗口在鼠标附近显示
- ✅ 翻译结果正确显示
- ✅ 鼠标移入时不会自动关闭
- ✅ 鼠标移出后按照设置的时间自动关闭

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 5.2 窗口唯一性测试

#### 测试步骤
1. 选中一段文本，按下快捷键触发翻译
2. 翻译窗口显示后，立即再次按下快捷键
3. 观察是否只有一个翻译窗口显示
4. 快速连续按下快捷键3-5次
5. 观察是否始终只有一个翻译窗口

#### 预期结果
- ✅ 始终只有一个翻译窗口显示
- ✅ 新的翻译请求会隐藏旧窗口，显示新窗口
- ✅ 不会出现多个窗口同时显示

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 5.3 窗口位置测试

#### 测试步骤
1. 在屏幕左上角选中文本，触发翻译
2. 观察窗口是否在鼠标附近显示，且不超出屏幕边界
3. 在屏幕右下角选中文本，触发翻译
4. 观察窗口是否在鼠标附近显示，且不超出屏幕边界
5. 在屏幕中央选中文本，触发翻译
6. 观察窗口位置是否合理

#### 预期结果
- ✅ 窗口始终在屏幕可见区域内
- ✅ 窗口位置根据鼠标位置动态调整
- ✅ 边界检测正常工作

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 5.4 窗口大小自适应测试

#### 测试步骤
1. 选中短文本（10个字符以内），触发翻译
2. 观察窗口大小
3. 选中长文本（100个字符以上），触发翻译
4. 观察窗口大小是否自动调整
5. 选中超长文本（500个字符以上），触发翻译
6. 观察窗口是否有滚动条

#### 预期结果
- ✅ 短文本显示小窗口
- ✅ 长文本窗口自动变宽
- ✅ 超长文本窗口有最大宽度限制，显示滚动条

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 5.5 复制功能测试

#### 测试步骤
1. 触发翻译，等待结果显示
2. 点击"复制"按钮
3. 在任意应用中粘贴（Ctrl+V）
4. 检查粘贴的内容是否是翻译结果

#### 预期结果
- ✅ 点击复制按钮后，翻译结果被复制到剪贴板
- ✅ 粘贴的内容与翻译结果一致

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 5.6 ESC 键关闭测试

#### 测试步骤
1. 触发翻译，等待窗口显示
2. 按下 ESC 键
3. 观察窗口是否立即关闭

#### 预期结果
- ✅ 按下 ESC 键后窗口立即关闭

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 5.7 错误处理测试

#### 测试步骤
1. 在设置中清空 API Key，保存
2. 触发翻译
3. 观察是否显示错误提示："API Key未配置，请在系统托盘菜单中打开设置"
4. 配置无效的 API Key
5. 触发翻译
6. 观察是否显示翻译失败的错误提示

#### 预期结果
- ✅ API Key 未配置时显示错误提示
- ✅ API Key 无效时显示翻译失败提示
- ✅ 错误提示在翻译窗口中显示

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 6. 防抖和并发测试

### 6.1 快捷键防抖测试

#### 测试步骤
1. 快速连续按下快捷键（间隔小于300ms）
2. 观察是否只触发一次翻译

#### 预期结果
- ✅ 300ms 内的重复按键被忽略
- ✅ 只触发一次翻译

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 6.2 并发请求测试

#### 测试步骤
1. 选中文本A，按下快捷键
2. 在翻译完成前，选中文本B，再次按下快捷键
3. 观察是否只显示文本B的翻译结果

#### 预期结果
- ✅ 只显示最新的翻译结果
- ✅ 旧的翻译请求被忽略或取消

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 7. 持久化存储测试

### 测试步骤
1. 配置所有设置（API Key、语言方向、自动关闭时间、快捷键）
2. 保存设置
3. 完全退出应用程序
4. 重新启动应用程序
5. 打开设置窗口，检查所有设置是否保持

#### 预期结果
- ✅ 所有设置在重启后保持
- ✅ 自定义快捷键在重启后仍然有效

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 8. 边界情况测试

### 8.1 空文本测试

#### 测试步骤
1. 不选中任何文本，按下快捷键
2. 观察是否显示窗口

#### 预期结果
- ✅ 不显示翻译窗口
- ✅ 日志中记录"未获取到选中文本"

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 8.2 超长文本测试

#### 测试步骤
1. 选中超过1000个字符的文本
2. 按下快捷键触发翻译
3. 观察翻译结果

#### 预期结果
- ✅ 只翻译前1000个字符
- ✅ 翻译窗口正常显示

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 8.3 特殊字符测试

#### 测试步骤
1. 选中包含特殊字符的文本（如 emoji、换行符、制表符）
2. 按下快捷键触发翻译
3. 观察翻译结果是否正确显示

#### 预期结果
- ✅ 特殊字符正常处理
- ✅ 翻译结果正确显示

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 8.4 网络错误测试

#### 测试步骤
1. 断开网络连接
2. 触发翻译
3. 观察是否显示网络错误提示

#### 预期结果
- ✅ 显示网络连接失败错误提示
- ✅ 错误提示在翻译窗口中显示

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 9. 性能测试

### 9.1 响应速度测试

#### 测试步骤
1. 选中文本，按下快捷键
2. 记录从按下快捷键到窗口显示的时间
3. 记录从窗口显示到翻译结果显示的时间

#### 预期结果
- ✅ 窗口显示延迟 < 500ms
- ✅ 翻译结果显示延迟 < 3s（取决于网络）

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 9.2 内存占用测试

#### 测试步骤
1. 启动应用程序
2. 打开任务管理器，查看内存占用
3. 触发10次翻译
4. 再次查看内存占用

#### 预期结果
- ✅ 初始内存占用 < 100MB
- ✅ 多次翻译后内存占用稳定，无明显泄漏

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 10. 快捷键冲突测试

### 测试步骤
1. 打开设置窗口
2. 尝试设置一个已被系统占用的快捷键（如 Ctrl+C）
3. 点击"保存更改"
4. 观察是否显示快捷键已被占用的错误提示

#### 预期结果
- ✅ 显示"快捷键不可用: 快捷键已被占用"提示
- ✅ 设置不会保存
- ✅ 快捷键保持原值

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 11. UI/UX 测试

### 11.1 设置窗口布局测试

#### 测试步骤
1. 打开设置窗口
2. 检查所有配置项是否正确显示
3. 检查"保存更改"按钮是否在窗口底部右下角
4. 检查按钮与窗口边缘的间距是否合适

#### 预期结果
- ✅ 所有配置项清晰可见
- ✅ "保存更改"按钮在底部右下角
- ✅ 间距合适（pt-8 pb-8）

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 11.2 Toast 提示测试

#### 测试步骤
1. 触发各种操作（保存设置、验证失败等）
2. 观察 toast 提示是否显示在右上角
3. 检查 toast 提示的内容是否清晰
4. 检查 toast 提示是否自动消失

#### 预期结果
- ✅ Toast 提示显示在右上角
- ✅ 提示内容清晰易懂
- ✅ 提示自动消失

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

### 11.3 翻译窗口动画测试

#### 测试步骤
1. 首次触发翻译
2. 观察窗口是否有进入动画
3. 再次触发翻译
4. 观察窗口是否没有动画（直接显示）

#### 预期结果
- ✅ 首次显示有进入动画
- ✅ 后续显示无动画

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 12. 多语言翻译测试

### 测试步骤
1. 配置源语言为 EN，目标语言为 ZH
2. 选中英文文本，触发翻译，检查结果
3. 配置源语言为 ZH，目标语言为 EN
4. 选中中文文本，触发翻译，检查结果
5. 尝试其他语言对（如 JA → EN, FR → ZH）

#### 预期结果
- ✅ EN → ZH 翻译正常
- ✅ ZH → EN 翻译正常
- ✅ 其他语言对翻译正常

#### 实际结果
- [ ] 通过
- [ ] 失败（描述问题）：

---

## 测试总结

### 通过的测试
- [ ] 单实例限制
- [ ] 系统托盘
- [ ] 首次启动
- [ ] API Key 配置
- [ ] 语言方向配置
- [ ] 自动关闭时间配置
- [ ] 自定义快捷键
- [ ] 基本翻译功能
- [ ] 窗口唯一性
- [ ] 窗口位置
- [ ] 窗口大小自适应
- [ ] 复制功能
- [ ] ESC 键关闭
- [ ] 错误处理
- [ ] 防抖和并发
- [ ] 持久化存储
- [ ] 边界情况
- [ ] 性能
- [ ] 快捷键冲突
- [ ] UI/UX
- [ ] 多语言翻译

### 发现的问题
1.
2.
3.

### 需要改进的地方
1.
2.
3.

---

## 测试建议

1. **按顺序测试**：建议按照上述顺序进行测试，因为某些测试依赖于前面的测试结果
2. **记录问题**：发现问题时，详细记录问题的重现步骤、预期结果和实际结果
3. **多次测试**：对于关键功能（如快捷键、翻译窗口），建议多次测试以确保稳定性
4. **不同场景**：在不同的应用中测试（如浏览器、记事本、Word等）
5. **日志查看**：如果遇到问题，可以查看应用日志以获取更多信息

## 日志查看方法

应用日志会输出到控制台。如果使用 `npm run tauri dev` 启动应用，可以在终端中看到日志输出。

关键日志标记：
- `INFO` - 正常信息
- `WARN` - 警告信息
- `ERROR` - 错误信息
- `DEBUG` - 调试信息（仅在开发模式）
